================================================================================
EARTHQUAKE MONITOR - SYSTEM ARCHITECTURE & DATA FLOW EXPLANATION
================================================================================

This document provides a Masters-level technical breakdown of the system's 
architecture, explaining the role of each component and the data relations.

--------------------------------------------------------------------------------
STEP-BY-STEP DATA LIFECYCLE
--------------------------------------------------------------------------------

1. DATA ACQUISITION (External Layer)
------------------------------------
- Source: USGS (United States Geological Survey) API.
- Protocol: Secure HTTP (HTTPS) using GeoJSON format.
- Function: The entry point for all raw seismic data including coordinates, 
  magnitude, depth, and event timestamps.

2. INGESTION & TRANSFORMATION (Producer Layer)
----------------------------------------------
- Component: Python Ingestion Engine (producer.py).
- Action: Queries the source every 30 seconds (polling).
- Deduplication Logic: Before processing, the engine compares the Event ID 
  against a Redis SET. If the ID exists, it's discarded to prevent redundant 
  processing of the same earthquake.
- Result: Cleaned, structured "Earthquake Events" ready for the pipeline.

3. ASYNCHRONOUS MESSAGING (Message Broker Layer)
------------------------------------------------
- Component: Redis Streams (XADD).
- Role: Acts as a high-performance buffer (FIFO queue).
- Benefit: Decouples ingestion from processing. If the processing layer (Step 4) 
  is under heavy load, Redis safely holds the messages, ensuring zero data loss 
  and system resilience.

4. ENRICHMENT & INTELLIGENCE (Worker Layer)
-------------------------------------------
- Component: Asynchronous Processing Worker (worker.py).
- Relationship to Redis: Consumes events from the stream in parallel.
- Key Tasks:
    - Reverse Geocoding: Converts GPS coordinates into human-readable 
      addresses (District, State, Country) via the Nominatim API.
    - Relationship Mapping: Analyzes time/distance proximity to identify 
      "Aftershocks" or "Cascade Events" where one quake triggers another.

5. MULTI-MODEL PERSISTENCE (Storage Layer)
------------------------------------------
Data is synchronized across three specialized databases:
- MongoDB (Document Store): Validated for geospatial queries (JSON/BSON). 
  Handles the long-term historical archive and complex location-based filtering.
- Neo4j (Graph Database): Stores entities (Earthquakes, Faults) as Nodes and 
  relationships (PART_OF_SEQUENCE, TRIGGERED_BY) as Edges. Essential for 
  identifying seismic patterns.
- Redis ZSET (Real-time Buffer): Maintains a "Snapshot" of the latest 500 
  events for sub-millisecond access by the frontend dashboard.

6. SERVICE ABSTRACTION (Application Layer)
------------------------------------------
- Component: FastAPI Backend (main.py).
- Role: The "Unified API Gateway." It abstracts the complexity of the three 
  databases into a single RESTful interface.
- Optimization: Implements Redis caching for analytics endpoints to ensure 
  repeat requests are served instantly without querying the disk.

7. CONSUMPTION & INTERACTION (Client Layer)
-------------------------------------------
- Component: React/Vite Dashboard.
- Data Flow:
    - REST API: Used for complex analytics, historical trends, and risk reports.
    - WebSockets: A persistent connection that "pushes" new events to the 
      screen as they happen, eliminating the need for manual page refreshes.

--------------------------------------------------------------------------------
TECHNICAL SUMMARY
--------------------------------------------------------------------------------
The system employs an "Event-Driven" architecture. The relationship between 
components is "Loosely Coupled"â€”meaning individual parts (e.g., the Geocoder 
or the Graph database) can be scaled or updated independently without 
interrupting the live data feed.
================================================================================
Generated for Academic Review - 2026-02-03
================================================================================
